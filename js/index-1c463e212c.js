"use strict";$(function(){initPlugins(),setTocToggle(),setAsideToggle(),loadSvg(),setSearchBoard()});var initPlugins=function(){$(".tab").click(function(e){window.location.href=$(this).find("a").prop("href")}),$(".modal").modal()},loadSvg=function(){var e=window.origin+"/svg/icon.svg";$('<div style="display:none"></div>').appendTo($("body")).load(e)},loadLunrDB=function(){var o=null;return function(){if(o)return o;var e=window.origin+"/index.json";return o=$.getJSON(e).then(function(e){return{pageMap:e}}).fail(function(e,t,n){console.error("Error getting Hugo index flie:",t+", "+n),o=null})}}(),setSearchBoard=function(){var o=$("#in-search"),a=$("#out-search"),i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"No Result...",t=$('<span class="collection-item text-grey" style="display:none">'+e+"</span>");a.empty().append(t.fadeIn(200))};i();var s=0,r=function(t){return loadLunrDB().then(function(e){!function(e){if(e&&e.length){$.isArray(e)||(e=[e]);var t=(e=e.slice(0,10)).map(function(e,t){return $('<a href="'+e.uri+'" class="collection-item nowrap '+(0==t?"selected":"")+'" style="display:none"><i class="material-icons">description</i>'+e.title+"</a>")});a.empty().append(t),s=t.length,t.forEach(function(e){return e.fadeIn(100)})}else i()}(e.pageMap.filter(function(e){return e.title}).filter(function(e){return e.title.includes(t)}))})},l={40:"DOWN",38:"UP",13:"ENTER",16:"SHIFT",27:"ESCAPE"},c=0;o.keydown(function(){if("ENTER"==l[event.keyCode]){var e=a.find("a.selected");0<e.length&&(window.location.href=e.attr("href"),event.preventDefault(),event.stopPropagation())}}),o.keyup(function(){var e=o.val().trim(),t=l[event.keyCode];if(t)switch(event.stopPropagation(),event.preventDefault(),t){case"UP":a.find("a:eq("+c+")").removeClass("selected"),0==c&&1<s?(c=s-1,a.find("a:eq("+c+")").addClass("selected")):0<c&&1<s&&(c--,a.find("a:eq("+c+")").addClass("selected"));break;case"DOWN":a.find("a:eq("+c+")").removeClass("selected"),c==s-1&&1<s?(c=0,a.find("a:eq("+c+")").addClass("selected")):0<=c&&1<s&&(c++,a.find("a:eq("+c+")").addClass("selected"));break;case"ENTER":var n=a.find("a.selected");return void(0<n.length&&(window.location.href=n.attr("href")))}else e.length<1?i():(i("Searching..."),r(e))})},setTocToggle=function(){var s=!0,r=$(".toc-panel nav"),l=($("footer.page-footer"),$(".post .card")),e=$("nav.navbar"),c=[].slice.call(r.find("li a")),d=r.outerHeight(),f=l.offset(),u=e.height(),i=u+20,v=t();function t(){return c.map(function(e){return Math.floor($(e.getAttribute("href")).offset().top-i)})}if(0!==r.length){r.on("click","a",function(e){var t,n,o,a=this;e.preventDefault(),e.stopPropagation(),s=!1,r.find("a").removeClass("active"),n=function(){s=!0,$(a).addClass("active")},o=(t=this).href?$(t.getAttribute("href")):$(t),$("html, body").animate({scrollTop:o.offset().top-i+1},400,n)});var n=function(){if(v){var e=l.height(),t=$("html").scrollTop()||$("body").scrollTop(),n=!1;if(t+u>=f.top&&(r.removeClass("absolute").addClass("fixed").css("top",u),n=!0),t+u+d>=f.top+e&&(r.removeClass("fixed").addClass("absolute").css({top:e-d}),n=!0),n||r.removeClass("fixed").removeClass("absolute").css({top:"initial"}),s){for(var o,a=0,i=v.length-1;a<i;)v[o=a+i+1>>1]===t?a=i=o:v[o]<t?a=o:i=o-1;$(c).removeClass("active").eq(a).addClass("active")}}};$(window).resize(function(){v=t(),f=l.offset(),d=r.outerHeight(),u=e.height(),i=u+20,s=!0,n()}),$(window).scroll(function(){return n()}),n()}},setAsideToggle=function(){var e=$("aside.side-panel"),t=$("body"),n=$(".button-collapse"),o=$("i.material-icons",n),a=$('<div id="js-cover"></div>').appendTo(t),i=function(){e.hasClass("open")?(e.removeClass("open"),a.fadeOut(400),t.removeClass("covered"),o.text("menu")):(e.addClass("open"),a.fadeIn(400),t.addClass("covered"),o.text("close"))};a.click(function(e){e.stopPropagation(),e.preventDefault(),i()}),n.click(i)};