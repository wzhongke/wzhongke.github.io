"use strict";$(function(){initPlugins(),setTocToggle(),setAsideToggle(),loadSvg(),setSearchBoard()});var initPlugins=function(){$(".tab").click(function(e){window.location.href=$(this).find("a").prop("href")}),$(".modal").modal()},loadSvg=function(){var e=window.origin+"/svg/icon.svg";$('<div style="display:none"></div>').appendTo($("body")).load(e)},loadLunrDB=function(){var o=null;return function(){if(o)return o;var e=window.origin+"/index.json";return o=$.getJSON(e).then(function(e){return{pageMap:e.reduce(function(e,t){return e[t.uri]=t,e},Object.create(null)),index:lunr(function(){var t=this;this.field("title",{boost:10}),this.ref("uri"),e.forEach(function(e){return t.add(e)})})}}).fail(function(e,t,n){console.error("Error getting Hugo index flie:",t+", "+n),o=null})}}(),search=function(e){return loadLunrDB().then(function(t){return t.index.search(e).map(function(e){return t.pageMap[e.ref]})})},setSearchBoard=function(){var t=$("#in-search"),n=$("#out-search"),o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"No Result...",t=$('<span class="collection-item text-grey" style="display:none">'+e+"</span>");n.empty().append(t.fadeIn(200))};o();t.keyup(function(){var e=t.val().trim();e.length<1?o():(o("Searching..."),search(e).then(function(e){return function(e){if(e&&e.length){$.isArray(e)||(e=[e]);var t=e.map(function(e){return $('<a href="'+e.uri+'" class="collection-item nowrap" style="display:none"><i class="material-icons">description</i>'+e.title+"</a>")});n.empty().append(t),t.forEach(function(e){return e.fadeIn(100)})}else o()}(e)}).fail(function(){return o("Fail to execute search, Please check your network.")}))})},setTocToggle=function(){var r=!0,s=$(".toc-panel nav"),l=($("footer.page-footer"),$(".post .card")),e=$("nav.navbar"),c=[].slice.call(s.find("li a")),u=s.outerHeight(),f=l.offset(),d=e.height(),a=d+20,p=t();function t(){return c.map(function(e){return Math.floor($(e.getAttribute("href")).offset().top-a)})}if(0!==s.length){s.on("click","a",function(e){var t,n,o,i=this;e.preventDefault(),e.stopPropagation(),r=!1,s.find("a").removeClass("active"),n=function(){r=!0,$(i).addClass("active")},o=(t=this).href?$(t.getAttribute("href")):$(t),$("html, body").animate({scrollTop:o.offset().top-a+1},400,n)});var n=function(){if(p){var e=l.height(),t=$("html").scrollTop()||$("body").scrollTop(),n=!1;if(t+d>=f.top&&(s.removeClass("absolute").addClass("fixed").css("top",d),n=!0),t+d+u>=f.top+e&&(s.removeClass("fixed").addClass("absolute").css({top:e-u}),n=!0),n||s.removeClass("fixed").removeClass("absolute").css({top:"initial"}),r){for(var o,i=0,a=p.length-1;i<a;)p[o=i+a+1>>1]===t?i=a=o:p[o]<t?i=o:a=o-1;$(c).removeClass("active").eq(i).addClass("active")}}};$(window).resize(function(){p=t(),f=l.offset(),u=s.outerHeight(),d=e.height(),a=d+20,r=!0,n()}),$(window).scroll(function(){return n()}),n()}},setAsideToggle=function(){var e=$("aside.side-panel"),t=$("body"),n=$(".button-collapse"),o=$("i.material-icons",n),i=$('<div id="js-cover"></div>').appendTo(t),a=function(){e.hasClass("open")?(e.removeClass("open"),i.fadeOut(400),t.removeClass("covered"),o.text("menu")):(e.addClass("open"),i.fadeIn(400),t.addClass("covered"),o.text("close"))};i.click(function(e){e.stopPropagation(),e.preventDefault(),a()}),n.click(a)};