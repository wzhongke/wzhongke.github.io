<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><title>linux 网络常用命令 | World of Wang</title><meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1"><link rel="canonical" href="https://wzhongke.github.io/post/linux/linux-server/"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/ocean.min.css" rel="stylesheet"><link rel="stylesheet" href="https://wzhongke.github.io//css/index-ae15952095.css"><link href="https://wzhongke.github.io/index.xml" rel="alternate" type="application/rss+xml" title="World of Wang"><link href="https://wzhongke.github.io/index.xml" rel="feed" type="application/rss+xml" title="World of Wang"><link href="https://wzhongke.github.io//favicon.ico" rel="shortcut icon"><script>window.origin = "https://wzhongke.github.io/";
    
    var outer = document.createElement('div');
    outer.style.cssText = "visibility:hidden;width:100%;overflow:scroll";
    document.documentElement.appendChild(outer);
    window.scrollWidth = outer.offsetWidth - outer.clientWidth;
    document.documentElement.removeChild(outer);</script></head><body><div id="modal-search" class="modal"><div class="modal-content"><form><div class="row"><div class="input-field col s12"><input id="in-search" type="text" required aria-required="true" autofocus autocomplete="off"> <label for="in-search">Search</label></div></div></form><div class="out-wrapper row"><div id="out-search" class="collection col s12"></div></div></div></div><div class="navbar-fixed"><nav class="navbar"><div class="nav-wrapper container"><a href="javascript:void(0)" class="button-collapse"><i class="material-icons">menu</i></a> <a href="https://wzhongke.github.io/" class="brand-logo"><i class="material-icons">restaurant_menu</i> World of Wang</a><ul class="right hide-on-small-and-down"><li><a class="modal-trigger" href="#modal-search"><i class="material-icons">search</i></a></li><li><a href="https://wzhongke.github.io/index.xml" target="_blank"><i class="material-icons">rss_feed</i></a></li></ul><ul class="center tabs tabs-transparent hide-on-med-and-down"><li class="tab"><a href="https://wzhongke.github.io//" class="">Home</a></li><li class="tab"><a href="https://wzhongke.github.io//archive/" class="">Archive</a></li><li class="tab"><a href="https://wzhongke.github.io//about/" class="">About</a></li><li class="tab"><a href="https://wzhongke.github.io//post/%E7%A2%B0%E5%88%B0%E8%BF%87%E7%9A%84%E9%97%AE%E9%A2%98/" class="">碰到过的问题</a></li></ul></div></nav></div><aside class="side-panel"><div class="inner"><div class="profile"><div class="profile__bg" style="background-image:url('https://wzhongke.github.io//img/profile-bg-7c6e6a1672.jpg')"></div><img class="profile__avatar" src="https://wzhongke.github.io//img/sign-d1f802b4e8.jpg" alt="avatar"><h3 class="profile__name">壹冶知秋</h3><p class="profile__desc">Do not ride on fear...</p></div><ul class="nav-group show-on-medium-and-down menu"><li><a class="collapsible-header waves-effect waves-indigo" href="https://wzhongke.github.io//"><i class="material-icons">home</i> <span class="content">Home</span> <i class="material-icons">chevron_right</i></a></li><li><a class="collapsible-header waves-effect waves-indigo" href="https://wzhongke.github.io//archive/"><i class="material-icons">archive</i> <span class="content">Archive</span> <i class="material-icons">chevron_right</i></a></li><li><a class="collapsible-header waves-effect waves-indigo" href="https://wzhongke.github.io//about/"><i class="material-icons">person</i> <span class="content">About</span> <i class="material-icons">chevron_right</i></a></li><li><a class="collapsible-header waves-effect waves-indigo" href="https://wzhongke.github.io//post/%E7%A2%B0%E5%88%B0%E8%BF%87%E7%9A%84%E9%97%AE%E9%A2%98/"><i class="material-icons">bookmark</i> <span class="content">碰到过的问题</span> <i class="material-icons">chevron_right</i></a></li></ul><ul class="nav-group show-on-small tools"><li><a class="collapsible-header waves-effect waves-indigo modal-trigger" href="#modal-search"><i class="material-icons">search</i> <span class="content">Search</span> <i class="material-icons">chevron_right</i></a></li><li><a class="collapsible-header waves-effect waves-indigo" target="_blank" href="https://wzhongke.github.io/index.xml"><i class="material-icons">rss_feed</i> <span class="content">RSS Feed</span> <i class="material-icons">chevron_right</i></a></li></ul><ul class="collapsible nav-group" data-collapsible="accordion"><li><div class="collapsible-header waves-effect waves-indigo"><i class="material-icons">whatshot</i> <span class="content">Latest</span> <i class="material-icons angle">expand_more</i></div><div class="collapsible-body"><div class="collection"><a class="collection-item" href="https://wzhongke.github.io/post/">Posts</a> <a class="collection-item" href="https://wzhongke.github.io/post/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%80%9D%E8%80%83%E5%BF%AB%E4%B8%8E%E6%85%A2/">思考快与慢</a> <a class="collection-item" href="https://wzhongke.github.io/post/java/netty-%E5%AE%9E%E6%88%98/">netty 实战</a> <a class="collection-item" href="https://wzhongke.github.io/post/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A/">非暴力沟通</a> <a class="collection-item" href="https://wzhongke.github.io/post/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E4%BA%BA%E7%94%9F%E7%9A%84%E6%99%BA%E6%85%A7-%E5%8F%94%E6%9C%AC%E5%8D%8E/">人生的智慧_叔本华</a> <a class="collection-item" href="https://wzhongke.github.io/post/node/node%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">node使用笔记</a> <a class="collection-item" href="https://wzhongke.github.io/post/node/typeorm/">typeorm</a> <a class="collection-item" href="https://wzhongke.github.io/post/java/spring-%E6%BA%90%E7%A0%81/">深入浅出 nodejs</a> <a class="collection-item" href="https://wzhongke.github.io/post/java/java%E5%A0%86%E5%86%85%E5%AD%98/">java 内存以及GC</a> <a class="collection-item" href="https://wzhongke.github.io/post/java/java%E8%AE%A1%E7%AE%97%E5%86%85%E5%AD%98/">java 使用代码计算内存</a></div></div></li><li><div class="collapsible-header waves-effect waves-indigo"><i class="material-icons"><i class="material-icons">class</i></i> <span class="content">Category </span><i class="material-icons angle">expand_more</i></div><div class="collapsible-body"><div class="collection"><a class="collection-item" href="https://wzhongke.github.io//categories/java">java<span class="badge">14</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/linux">linux<span class="badge">10</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/javascript">javascript<span class="badge">7</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E7%AE%97%E6%B3%95">算法<span class="badge">7</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/python">python<span class="badge">5</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">设计模式<span class="badge">5</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/mysql">mysql<span class="badge">4</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/other">other<span class="badge">4</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E5%B7%A5%E5%85%B7">工具<span class="badge">3</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">读书笔记<span class="badge">3</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/css">css<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/sql">sql<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/error">error<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/markdown">markdown<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/nodejs">nodejs<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/svg">svg<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/vue">vue<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E6%97%85%E8%A1%8C">旅行<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E7%A4%BE%E7%A7%91">社科<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//categories/%E7%BC%96%E7%A8%8B">编程<span class="badge">1</span></a></div></div></li><li><div class="collapsible-header waves-effect waves-indigo"><i class="material-icons"><i class="material-icons">local_offer</i></i> <span class="content">Tag </span><i class="material-icons angle">expand_more</i></div><div class="collapsible-body"><div class="collection"><a class="collection-item" href="https://wzhongke.github.io//tags/java">java<span class="badge">14</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/linux">linux<span class="badge">9</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/javascript">javascript<span class="badge">6</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/%E7%AE%97%E6%B3%95">算法<span class="badge">6</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/python">python<span class="badge">5</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">设计模式<span class="badge">5</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/mysql">mysql<span class="badge">4</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/other">other<span class="badge">4</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/%E5%B7%A5%E5%85%B7">工具<span class="badge">3</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/css">css<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/markdown">markdown<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/sql">sql<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">读书笔记<span class="badge">2</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/error">error<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/nodejs">nodejs<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/svg">svg<span class="badge">1</span></a> <a class="collection-item" href="https://wzhongke.github.io//tags/%E6%97%85%E8%A1%8C">旅行<span class="badge">1</span></a></div></div></li></ul><ul class="nav-group external-link"><li><a class="collapsible-header waves-effect waves-indigo" href="https://github.com/wzhongke" target="_blank"><svg class="svg-icons svg-icons-github"><use xlink:href="#svg-icons-github"></use></svg> <span class="content">Github<small>@wzhongke</small></span> <i class="material-icons">chevron_right</i></a></li></ul></div></aside><main id="single" role="main" class="main-panel"><section class="container"><div class="inner"><div class="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation"><a class="breadcrumb" href="https://wzhongke.github.io/"><i class="material-icons">location_on</i>Home</a> <a class="breadcrumb" href="https://wzhongke.github.io/post/">Post</a> <a class="breadcrumb" href="https://wzhongke.github.io/post/linux/">Linux</a> <span class="breadcrumb">linux 网络常用命令</span></div><section class="post-wrapper"><div class="toc-panel"><nav id="TableOfContents"><ul><li><a href="#ifconfig-ifup-ifdown"><code>ifconfig</code>, <code>ifup</code>, <code>ifdown</code></a></li><li><a href="#tcpdump-抓包"><code>tcpdump</code> 抓包</a></li><li><a href="#route"><code>route</code></a></li><li><a href="#ping"><code>ping</code></a></li><li><a href="#traceroute-两主机间各节点分析"><code>traceroute</code> 两主机间各节点分析</a></li><li><a href="#netstat-查看本机的网络联机与后门"><code>netstat</code> 查看本机的网络联机与后门</a></li><li><a href="#host-侦测主机名"><code>host</code> 侦测主机名</a></li></ul></nav></div><div class="post"><div class="card"><div class="card-content"><span class="card-title">linux 网络常用命令 </span><span class="card-meta"><time><span>Thu Sep 21 2017</span></time><address><a href="https://wzhongke.github.io//categories/linux">linux</a>&nbsp;</address></span><article class="article"><h1 id="linux-常用网络命令">linux 常用网络命令</h1><h2 id="ifconfig-ifup-ifdown"><code>ifconfig</code>, <code>ifup</code>, <code>ifdown</code></h2><p>这三个指令都是用来启动网络接口的。</p><ol><li><code>ifconfig</code> <code>ifconfig</code>主要是可以手动启动、观察与修改网络接口的相关参数。语法如下:</li></ol><pre><code>ifconfig [interface] {up/down}         ## 观察与启动接口
ifconfig interface {options}           ## 设定与修改接口
# 参数说明
- interface:  网卡接口代号，如: eth0, th1, ppp0等
- options:  可以使用的参数: 
    - up/down:  启动/关闭该网络接口
    - mtu :  设定不同的MTU数值（不建议修改）
    - netmask:  设置自屏蔽网络
    - broadcast:  广播地址
</code></pre><p>在linux机器上执行<code>ifconfig</code>，会返回如下结果</p><pre><code>eth0      Link encap: Ethernet  HWaddr AA: AA: AA: 31: 79: 95  
          inet addr: 10.143.59.167  Bcast: 10.143.63.255  Mask: 255.255.248.0
          UP BROADCAST RUNNING MULTICAST  MTU: 1500  Metric: 1
          RX packets: 69269420 errors: 0 dropped: 0 overruns: 0 frame: 0
          TX packets: 43411105 errors: 0 dropped: 0 overruns: 0 carrier: 0
          collisions: 0 txqueuelen: 1000 
          RX bytes: 159293308457 (148.3 GiB)  TX bytes: 106356430482 (99.0 GiB)
</code></pre><ul><li>eth0: 网卡代号</li><li>HWaddr: 网卡硬件地址</li><li>RX: 网络由启动到目前为止的封包接收情况，packets代表封包数、errors代表封包发生错误的数量、dropped代表封包由于有问题而遭到丢弃的数量</li><li>TX: 与RX相反，为网络由启动到目前为止的传送情况</li><li>collisions: 代表封包碰撞情况</li><li>RX bytes, TX bytes: 总接收、发送字节总量 修改网络接口</li></ul><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ifconfig eth0 10.134.96.237    <span style="color:#75715e"># 系统会依照IP所在的class范围，自动计算netmask、broadcast等IP参数</span>
ifconfig eth0 10.134.96.237 netmask 255.255.255.128 mtu <span style="color:#ae81ff">8000</span>  <span style="color:#75715e"># 修改其他数值</span>
</code></pre></div><p>如果手动设置错误或者有问题，我们可以通过<code>/etc/init.d/network restart</code> 来重启整个网络接口 2. <code>ifup</code>, <code>ifdown</code> 还可以用配置文件来修改网络参数，执行这两个命令会执行<code>/etc/sysconfig/network-scripts</code>中相应的脚本</p><h2 id="tcpdump-抓包"><code>tcpdump</code> 抓包</h2><p><code>tcpdump [option]</code>: <code>option</code> 参数如下:</p><ul><li>a：尝试将网络和广播地址转换成名称；</li><li>c&lt;数据包数目&gt;：收到指定的数据包数目后，就停止进行倾倒操作；</li><li>d：把编译过的数据包编码转换成可阅读的格式，并倾倒到标准输出；</li><li>dd：把编译过的数据包编码转换成C语言的格式，并倾倒到标准输出；</li><li>ddd：把编译过的数据包编码转换成十进制数字的格式，并倾倒到标准输出；</li><li>e：在每列倾倒资料上显示连接层级的文件头；</li><li>f：用数字显示网际网络地址；</li><li>F&lt;表达文件&gt;：指定内含表达方式的文件；</li><li>i&lt;网络界面&gt;：使用指定的网络截面送出数据包；</li><li>l：使用标准输出列的缓冲区；</li><li>n：不把主机的网络地址转换成名字；</li><li>N：不列出域名；</li><li>O：不将数据包编码最佳化；</li><li>p：不让网络界面进入混杂模式；</li><li>q ：快速输出，仅列出少数的传输协议信息；</li><li>r&lt;数据包文件&gt;：从指定的文件读取数据包数据；</li><li>s&lt;数据包大小&gt;：设置每个数据包的大小；</li><li>S：用绝对而非相对数值列出TCP关联数；</li><li>t：在每列倾倒资料上不显示时间戳记；</li><li>tt： 在每列倾倒资料上显示未经格式化的时间戳记；</li><li>T&lt;数据包类型&gt;：强制将表达方式所指定的数据包转译成设置的数据包类型；</li><li>v：详细显示指令执行过程；</li><li>vv：更详细显示指令执行过程；</li><li>x：用十六进制字码列出数据包资料；</li><li>w&lt;数据包文件&gt;：把数据包数据写入指定的文件。</li></ul><ol><li><code>tcpdump -i eth0</code>: 监视指定网卡的数据</li><li><code>tcpdump host hostname</code>: 监视跟机器 <code>hostname</code> 的网络传输数据</li><li><code>tcpdump -x</code>: 用十六进制字码列出数据包资料</li></ol><h2 id="route"><code>route</code></h2><p>route可以查看机器使用的路由信息</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">route <span style="color:#f92672">[</span>-nee<span style="color:#f92672">]</span>
route add <span style="color:#f92672">[</span>-net/host<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>网域或主机<span style="color:#f92672">]</span> netmask <span style="color:#f92672">[</span>mask<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>gw/dev<span style="color:#f92672">]</span>
route del  <span style="color:#f92672">[</span>-net/host<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>网域或主机<span style="color:#f92672">]</span> netmask <span style="color:#f92672">[</span>mask<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>gw/dev<span style="color:#f92672">]</span>
<span style="color:#75715e">## 参数说明</span>
-n:  直接展示通讯协议或主机名，直接用IP或port number
-ee:  使用更详细的信息显示
<span style="color:#75715e">## 增加与删除路由</span>
-nest:  后边接的是路由为一个域名
-host:  后面接的为连接到单部主机的路由
netmask:  与域名有关，可以设定netmask决定域名的大小
gw:  gateway的简写，后接的是IP
dev:  如果指定哪一块网卡联机出去，设定该值
</code></pre></div><p>使用<code>route</code>指令字段的含义如下:</p><ul><li>Destination, Genmask: 分别是network和netmask</li><li>Gateway: 表明该机器是通过哪个gateway连接出去的，如果是 0.0.0.0 表示该路由直接是本机传送</li><li>Iface: 表明是从哪个网卡出去的</li></ul><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 路由的增加与删除</span>
<span style="color:#75715e"># 删除192.168.0.0/16网段，需要将路由表上的信息都写入才能删除</span>
route del -net 192.168.0.0 netmask 255.255.0.0 dev eth0
<span style="color:#75715e"># 增加预设路由，只有一个就够了</span>
route add default gw 192.168.1.250
</code></pre></div><p>当出现<code>Network is unreachable</code>时，可能是gw后边的IP直接连接。</p><h2 id="ping"><code>ping</code></h2><p>ping通过ICMP封包来进行网络状态报告。其使用方式如下:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ping <span style="color:#f92672">[</span>选项与参数<span style="color:#f92672">]</span> IP
    -c 数值:  后接ping的次数
    -n:  输出数据时不进行IP与主机的反查，直接用IP输出，速度较快
    -s 数值:  发送出去的ICMP封包大小，预设为56bytes，可以调大
    -t 数值:  TTL的数值，预设是255，每经过一个节点就会减1
    -W 数值:  等待响应时间
<span style="color:#75715e"># 例子</span>
ping -c <span style="color:#ae81ff">3</span> 192.168.22.10
PING 192.168.22.10 <span style="color:#f92672">(</span>192.168.22.10<span style="color:#f92672">)</span> 56<span style="color:#f92672">(</span>84<span style="color:#f92672">)</span> bytes of data.
<span style="color:#ae81ff">64</span> bytes from 192.168.22.10: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">59</span> time<span style="color:#f92672">=</span>4.40 ms
<span style="color:#ae81ff">64</span> bytes from 192.168.22.10: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">59</span> time<span style="color:#f92672">=</span>1.40 ms
<span style="color:#ae81ff">64</span> bytes from 192.168.22.10: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">59</span> time<span style="color:#f92672">=</span>1.12 ms

--- 192.168.22.10 ping statistics ---
<span style="color:#ae81ff">3</span> packets transmitted, <span style="color:#ae81ff">3</span> received, 0% packet loss, time 2004ms
rtt min/avg/max/mdev <span style="color:#f92672">=</span> 1.121/2.309/4.405/1.486 ms
</code></pre></div><p>上例中响应消息中，几个重要的项目是：</p><ul><li>64bytes: 表示传送的ICMP封包大小为64bytes，在某些特殊场合中，可以用-s 2000来取代</li><li>imcp_seq=1: ICMP所侦测进行的次数，第一次编号为1</li><li>ttl=59</li></ul><h2 id="traceroute-两主机间各节点分析"><code>traceroute</code> 两主机间各节点分析</h2><p><code>traceroute</code>用来追踪两部主机之间通过的各个节点通讯状况的好坏。其使用方式如下:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">traceroute <span style="color:#f92672">[</span>选项与参数<span style="color:#f92672">]</span> IP
    -n:  必进行主机的名称解析，单纯用IP，速度较快
    -U:  使用UDP的port <span style="color:#ae81ff">33433</span> 来进行侦测
    -I:  会用 ICMP 的方式 进行侦测
    -w:  若对方主机在几秒钟没有回声，就放弃
    -T:  使用TCP来侦测，因为UDP/ICMP的攻击层出不穷，因此很多路由器可能取消两个封包的响应功能。

<span style="color:#75715e">## 例子</span>
traceroute -n -w1 10.152.105.195
traceroute to 10.152.105.195 <span style="color:#f92672">(</span>10.152.105.195<span style="color:#f92672">)</span>, <span style="color:#ae81ff">30</span> hops max, <span style="color:#ae81ff">60</span> byte packets
 <span style="color:#ae81ff">1</span>  10.144.103.252  0.662 ms  0.646 ms  0.741 ms
 <span style="color:#ae81ff">2</span>  * * *
 <span style="color:#ae81ff">3</span>  * * *
 <span style="color:#ae81ff">4</span>  * * *
 <span style="color:#ae81ff">5</span>  * * *
 <span style="color:#ae81ff">6</span>  10.152.105.195  1.344 ms  1.172 ms  1.042 ms
</code></pre></div><p>其中 <code>* * *</code> 是因为该节点可能有某些防护措施，让我们发送的封包信息被丢弃</p><h2 id="netstat-查看本机的网络联机与后门"><code>netstat</code> 查看本机的网络联机与后门</h2><p><code>netstat</code>可以查看网络接口监听情况</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 与路由有关的参数</span>
netstat -<span style="color:#f92672">[</span>rn<span style="color:#f92672">]</span>
<span style="color:#75715e"># 与网络接口有关的参数</span>
netstat -<span style="color:#f92672">[</span>antulpc<span style="color:#f92672">]</span>
与路由有关的参数：
-r : 列出路由表<span style="color:#f92672">(</span>route table<span style="color:#f92672">)</span>，功能如同 route 这个指令；
-n : 不使用主机名与服务名称，使用 IP 与 port number ，如同 route -n
与网络接口有关的参数: 
-a : 列出所有的联机状态，包括 tcp/udp/unix socket 等；
-t : 仅列出 TCP 封包的联机；
-u : 仅列出 UDP 封包的联机；
-l : 仅列出有在 Listen <span style="color:#f92672">(</span>监听<span style="color:#f92672">)</span> 的服务之网络状态；
-p : 列出 PID 与 Program
-c : 可以设定几秒钟后自动更新一次，例如 -c <span style="color:#ae81ff">5</span> 每五秒更新一次网络状态的显示
<span style="color:#75715e"># 例子</span>
netstat -an
Active Internet connections <span style="color:#f92672">(</span>servers and established<span style="color:#f92672">)</span>
Proto Recv-Q Send-Q Local Address               Foreign Address             State      
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 0.0.0.0:9090                0.0.0.0:*                   LISTEN      
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 127.0.0.1:6600              0.0.0.0:*                   LISTEN      
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 0.0.0.0:80                  0.0.0.0:*                   LISTEN      
<span style="color:#75715e"># 显示目前已经启动的网络服务</span>
netstat -tulnp
Active Internet connections <span style="color:#f92672">(</span>only servers<span style="color:#f92672">)</span>
Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 0.0.0.0:9090                0.0.0.0:*                   LISTEN      18251/java          
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 127.0.0.1:6600              0.0.0.0:*                   LISTEN      18201/java          
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 0.0.0.0:80                  0.0.0.0:*                   LISTEN      26249/nginx         
tcp        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span> 0.0.0.0:8080                0.0.0.0:*                   LISTEN      18251/java 
<span style="color:#75715e"># 观察本机上头所有的网络联机状态</span>
netstat -atunp
</code></pre></div><p>netstat的输出主要分为两大部分：TPC/IP的网络接口；传统的Unix socket。输出参数的含义如下：</p><ul><li>Proto: 联机封包协议，TCP/UDP等</li><li>Recv-Q: 非由用户程序连接所复制而来的总bytes数，</li><li>Send-Q: 由远程主机所传送而来，但不具有ACK标志的总bytes数，意指主动联机SYNdrome或其他标志的封包所占的bytes数</li><li>Local Address: 本地端的地址和端口号</li><li>Foreign Address: 远程主机IP与端口</li><li>stat: 连接状态</li></ul><h2 id="host-侦测主机名"><code>host</code> 侦测主机名</h2><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">host <span style="color:#f92672">[</span>-a<span style="color:#f92672">]</span> hostname <span style="color:#f92672">[</span>server<span style="color:#f92672">]</span>
-a: 列出该主机详细的各项主机名设定数据
<span style="color:#f92672">[</span>server<span style="color:#f92672">]</span>: 可以使用非为 /etc/resolv.con 的DNS服务IP来查询
<span style="color:#75715e"># 例子</span>
host www.baidu.com
</code></pre></div></article></div><div class="card-action"><i class="material-icons">local_offer</i> <a class="tag" href="https://wzhongke.github.io//tags/linux">#linux</a>&nbsp;</div><div class="card-action"><div class="comments"><div id="disqus_thread"></div></div><script type="text/javascript">var disqus_shortname = 'wzhongke';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="pagination-single"><span class="pagination-item previous"><i class="material-icons">navigate_before</i> <a href="https://wzhongke.github.io/post/java/jvm%E8%B0%83%E4%BC%98/" rel="prev">jvm调优</a> </span><span class="pagination-item next"><i class="material-icons">navigate_next</i> <a href="https://wzhongke.github.io/post/java/java-%E6%B3%9B%E5%9E%8B/" rel="next">java 泛型</a></span></div></div></section></div></section><footer class="page-footer"><div class="container"><div class="row"><div class="col l6 s12"><h5 class="white-text">World of Wang</h5><p class="grey-text text-lighten-4">Theme <a href="https://github.com/stkevintan/hugo-YAMT-theme" target="_blank">YAMT</a> designed by <a href="https://github.com/stkevintan" target="_blank">Kevin Tan</a> with ❤</p></div><div class="col l4 offset-l2 s12"><h5 class="white-text">My Friends</h5><ul><li><a class="grey-text text-lighten-3" href="https://frantic1048.logdown.com/" target="_blank">Frantic1048</a></li></ul></div></div></div><div class="footer-copyright"><div class="container">Copyright@Kevin Tan</div></div></footer></main><script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="//dlweb.sogoucdn.com/common/lib/jquery/jquery-1.11.0.min.js"></script><script type="text/javascript" src="//cdn.bootcss.com/lunr.js/2.1.2/lunr.min.js"></script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']]
      }
    });</script><script type="text/javascript" src="https://wzhongke.github.io//js/materialize.min.js"></script><script type="text/javascript" src="https://wzhongke.github.io//js/index-1c463e212c.js"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-9350854994277981",
        enable_page_level_ads: true
    });</script></body></html>